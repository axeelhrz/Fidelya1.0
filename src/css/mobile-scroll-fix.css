/* ===== CORRECCIÓN COMPLETA DE SCROLL MÓVIL ===== */

/* Resetear scroll básico para móviles */
@media (width <= 1023px) {
    /* Asegurar scroll básico en html y body */
    html {
        overflow-x: hidden !important;
        overflow-y: auto !important;
        scroll-behavior: smooth !important;
        -webkit-overflow-scrolling: touch !important;
        height: 100% !important;
        width: 100% !important;
    }
    
    body {
        overflow-x: hidden !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        overscroll-behavior: contain !important;
        height: auto !important;
        min-height: 100vh !important;
        min-height: 100dvh !important;
        width: 100% !important;
        position: relative !important;
    }
    
    /* Corregir elementos que pueden bloquear el scroll */
    .bg-canvas {
        position: fixed !important;
        pointer-events: none !important;
        z-index: 0 !important;
        overflow: hidden !important;
    }
    
    /* Asegurar que todas las secciones permitan scroll */
    .hero,
    .features,
    .videos,
    .faq,
    .contact {
        position: relative !important;
        overflow: visible !important;
        height: auto !important;
        min-height: auto !important;
        width: 100% !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        z-index: auto !important;
        transform: none !important;
        will-change: auto !important;
    }
    
    /* Corregir header para que no interfiera */
    .header {
        position: fixed !important;
        z-index: 1000 !important;
        pointer-events: auto !important;
        overflow: visible !important;
    }
    
    /* Asegurar que el menú móvil no bloquee scroll cuando está cerrado */
    .nav__menu:not(.active) {
        pointer-events: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        left: -100% !important;
    }
    
    /* Cuando el menú está activo, bloquear scroll del body */
    body.no-scroll {
        position: fixed !important;
        width: 100% !important;
        height: 100% !important;
        overflow: hidden !important;
        top: 0 !important;
        left: 0 !important;
    }
    
    /* Corregir elementos flotantes */
    .floating-widget {
        position: fixed !important;
        z-index: 999 !important;
        pointer-events: auto !important;
    }
    
    /* Optimizar elementos que pueden causar problemas de scroll */
    .hero__phone,
    .hero__phone-container,
    .hero__phone-screen,
    .hero__phone-content,
    .hero__phone-video,
    .hero__phone-app-image,
    .hero__media {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        pointer-events: none !important;
        position: absolute !important;
        z-index: -1 !important;
    }
    
    /* Asegurar que el video móvil sea visible */
    .hero__mobile-video {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        position: relative !important;
        z-index: 1 !important;
        pointer-events: auto !important;
    }
    
    /* Corregir contenedores que pueden tener problemas */
    .hero__container,
    .features__grid,
    .videos__main-container,
    .faq__container,
    .contact__grid {
        position: relative !important;
        overflow: visible !important;
        height: auto !important;
        min-height: auto !important;
        width: 100% !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    
    /* Específico para grid de características */
    .features__grid {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: var(--space-4xl) !important;
    }
    
    /* Específico para grid de contacto */
    .contact__grid {
        display: grid !important;
        grid-template-columns: 1fr !important;
        gap: var(--space-2xl) !important;
    }
    
    /* Corregir elementos individuales */
    .feature,
    .faq__item,
    .contact__channel {
        position: relative !important;
        overflow: visible !important;
        height: auto !important;
        min-height: auto !important;
        width: 100% !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        transform: none !important;
    }
    
    /* Asegurar que los elementos interactivos funcionen */
    .faq__question,
    .contact__channel-btn,
    .nav__link,
    .btn {
        pointer-events: auto !important;
        touch-action: manipulation !important;
        -webkit-tap-highlight-color: transparent !important;
        cursor: pointer !important;
    }
    
    /* Corregir problemas específicos de iOS */
    @supports (-webkit-touch-callout: none) {
        html {
            -webkit-overflow-scrolling: touch !important;
        }
        
        body {
            -webkit-overflow-scrolling: touch !important;
            overscroll-behavior-y: contain !important;
        }
        
        /* Prevenir zoom en inputs */
        input, textarea, select {
            font-size: 16px !important;
        }
    }
    
    /* Corregir problemas específicos de Android */
    @media screen and (-webkit-min-device-pixel-ratio: 0) {
        body {
            overscroll-behavior: contain !important;
        }
    }
    
    /* Asegurar que no hay elementos con position fixed que bloqueen */
    * {
        max-width: 100% !important;
    }
    
    /* Corregir cualquier elemento que pueda estar causando overflow horizontal */
    *:not(.bg-canvas):not(.bg-canvas *):not(.header):not(.header *):not(.floating-widget):not(.floating-widget *) {
        max-width: 100% !important;
        overflow-x: visible !important;
    }
    
    /* Asegurar que las animaciones no interfieran con el scroll */
    .hero::before,
    .hero::after,
    .features::before,
    .features::after,
    .videos::before,
    .videos::after,
    .faq::before,
    .faq::after,
    .contact::before,
    .contact::after {
        pointer-events: none !important;
        position: absolute !important;
        z-index: 1 !important;
    }
    
    /* Corregir padding y margin que pueden causar problemas */
    .hero {
        padding-top: calc(var(--navbar-height-mobile) + 1rem) !important;
        padding-bottom: 2rem !important;
    }
    
    .features,
    .videos,
    .faq,
    .contact {
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
    
    /* Asegurar que el contenido sea scrolleable */
    main {
        position: relative !important;
        z-index: 1 !important;
        overflow: visible !important;
        height: auto !important;
        min-height: auto !important;
    }
    
    /* Corregir cualquier transform que pueda interferir */
    .hero__container {
        transform: none !important;
    }
    
    /* Asegurar que los elementos de video no causen problemas */
    video {
        max-width: 100% !important;
        height: auto !important;
        object-fit: cover !important;
    }
    
    /* Corregir problemas con elementos que usan will-change */
    * {
        will-change: auto !important;
    }
    
    /* Solo mantener will-change en elementos que realmente lo necesitan */
    .nav__toggle,
    .floating-widget__main-btn {
        will-change: transform !important;
    }
}

/* Correcciones específicas para pantallas muy pequeñas */
@media (width <= 480px) {
    /* Reducir padding aún más en pantallas pequeñas */
    .hero {
        padding-top: calc(var(--navbar-height-mobile) + 0.5rem) !important;
        padding-bottom: 1rem !important;
    }
    
    .features,
    .videos,
    .faq,
    .contact {
        padding-top: 1rem !important;
        padding-bottom: 1rem !important;
    }
    
    /* Asegurar que el texto no cause overflow */
    h1, h2, h3, h4, h5, h6 {
        word-wrap: break-word !important;
        overflow-wrap: break-word !important;
        hyphens: auto !important;
    }
}

/* Corrección para dispositivos con notch */
@media (width <= 1023px) {
    .hero {
        padding-top: max(calc(var(--navbar-height-mobile) + 1rem), calc(env(safe-area-inset-top, 0px) + var(--navbar-height-mobile) + 1rem)) !important;
    }
    
    .contact {
        padding-bottom: max(2rem, calc(env(safe-area-inset-bottom, 0px) + 2rem)) !important;
    }
}

/* Asegurar que el scroll funcione incluso con JavaScript deshabilitado */
@media (width <= 1023px) {
    .nav__menu {
        position: fixed !important;
        left: -100% !important;
        transition: left 0.3s ease !important;
    }
    
    .nav__menu.active {
        left: 0 !important;
    }
    
    /* Fallback para cuando JavaScript no funciona */
    .nav__toggle:checked ~ .nav__menu {
        left: 0 !important;
    }
}

/* Corrección final para asegurar scroll */
@media (width <= 1023px) {
    /* Forzar scroll en caso de que algo lo esté bloqueando */
    html, body {
        touch-action: pan-y !important;
    }
    
    /* Asegurar que no hay elementos que bloqueen el scroll */
    * {
        pointer-events: auto;
    }
    
    /* Excepto elementos decorativos */
    .bg-canvas,
    .bg-canvas *,
    .hero::before,
    .hero::after,
    .features::before,
    .features::after,
    .videos::before,
    .videos::after,
    .faq::before,
    .faq::after,
    .contact::before,
    .contact::after {
        pointer-events: none !important;
    }
}
